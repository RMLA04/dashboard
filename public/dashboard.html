<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DS&A Interactive Dashboard</title>
<style>
:root[data-theme="dark"]{
  --bg:#0f1117;--sidebar:#1a1d2e;--card:#1a1d2e;--card2:#22253a;
  --border:#2a2d3e;--text:#e0e0e0;--muted:#888;--accent:#00bcd4;
  --accent2:#7c3aed;--green:#4caf50;--red:#ff5722;--yellow:#ffeb3b;
  --node-bg:#22253a;--bar:#00bcd4;--shadow:rgba(0,188,212,.15);
  --btn-text:#000;--ripple:rgba(0,188,212,.35);
}
:root[data-theme="light"]{
  --bg:#f0f4f8;--sidebar:#fff;--card:#fff;--card2:#f0f4f8;
  --border:#dde3ed;--text:#1a1d2e;--muted:#666;--accent:#0288d1;
  --accent2:#7c3aed;--green:#388e3c;--red:#d84315;--yellow:#f9a825;
  --node-bg:#e3f2fd;--bar:#0288d1;--shadow:rgba(2,136,209,.12);
  --btn-text:#fff;--ripple:rgba(2,136,209,.3);
}
*{box-sizing:border-box;margin:0;padding:0;transition:background .25s,color .25s,border-color .25s}
html,body{height:100%;overflow:hidden}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);display:flex}

/* Sidebar */
#sidebar{width:230px;background:var(--sidebar);border-right:1px solid var(--border);display:flex;flex-direction:column;flex-shrink:0;box-shadow:4px 0 20px var(--shadow)}
.sidebar-header{padding:20px 16px 10px;border-bottom:1px solid var(--border)}
.sidebar-header h2{font-size:11px;text-transform:uppercase;letter-spacing:2px;color:var(--accent);margin-bottom:4px}
.sidebar-header p{font-size:11px;color:var(--muted)}
.nav-section{padding:12px 0;flex:1}
.nav-label{font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);padding:4px 16px 6px}
.nav-item{display:flex;align-items:center;gap:10px;padding:10px 16px;cursor:pointer;font-size:13px;color:var(--muted);border-left:3px solid transparent;position:relative;overflow:hidden;user-select:none}
.nav-item .icon{font-size:17px;width:22px;text-align:center}
.nav-item .label{flex:1}
.nav-item .badge{font-size:10px;background:var(--card2);padding:2px 7px;border-radius:10px;color:var(--muted)}
.nav-item:hover{background:var(--card2);color:var(--text)}
.nav-item.active{background:linear-gradient(90deg,var(--card2),transparent);color:var(--accent);border-left-color:var(--accent)}
.nav-item.active .badge{background:var(--accent);color:#000}
.sidebar-footer{padding:12px 16px;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.sidebar-footer span{font-size:11px;color:var(--muted)}
/* Theme toggle */
.theme-toggle{display:flex;align-items:center;gap:6px;cursor:pointer;background:var(--card2);border:1px solid var(--border);border-radius:20px;padding:4px 10px;font-size:12px;color:var(--text);user-select:none}
.theme-toggle:hover{border-color:var(--accent)}

/* Main */
#main{flex:1;display:flex;flex-direction:column;overflow:hidden}
#topbar{background:var(--sidebar);border-bottom:1px solid var(--border);padding:12px 24px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 12px var(--shadow)}
.topbar-left{display:flex;align-items:center;gap:12px}
#topic-icon{font-size:24px}
#topic-title{font-size:17px;font-weight:700;color:var(--text)}
#topic-sub{font-size:12px;color:var(--muted);margin-top:1px}
.topbar-right{display:flex;gap:8px}
.help-btn{background:var(--card2);border:1px solid var(--border);color:var(--text);padding:6px 14px;border-radius:8px;cursor:pointer;font-size:12px;display:flex;align-items:center;gap:5px}
.help-btn:hover{border-color:var(--accent);color:var(--accent)}

/* Content grid */
#content{flex:1;overflow-y:auto;padding:20px 24px;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto 1fr;gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px;box-shadow:0 2px 16px var(--shadow)}
.card:hover{box-shadow:0 4px 24px var(--shadow);border-color:var(--accent)}
.card h3{font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:var(--accent);margin-bottom:12px;display:flex;align-items:center;gap:6px}
.card h3 span{background:var(--card2);padding:3px 8px;border-radius:6px;font-size:10px}
.theory{grid-column:1/2;grid-row:1/2}
.complexity{grid-column:2/3;grid-row:1/2}
.visualizer{grid-column:1/3;grid-row:2/3}
.theory p{font-size:13px;line-height:1.8;color:var(--text)}
.theory b{color:var(--accent)}
.theory code{background:var(--card2);padding:1px 6px;border-radius:4px;font-size:12px;color:var(--accent2)}

/* Table */
table{width:100%;border-collapse:collapse;font-size:12.5px}
th{background:var(--card2);color:var(--accent);padding:8px 10px;text-align:left;font-weight:600;letter-spacing:.5px}
th:first-child{border-radius:8px 0 0 8px}
th:last-child{border-radius:0 8px 8px 0}
td{padding:7px 10px;border-bottom:1px solid var(--border);color:var(--text)}
tr:hover td{background:var(--card2)}
.pill{display:inline-block;padding:2px 8px;border-radius:10px;font-size:11px;font-weight:600}
.pill-green{background:rgba(76,175,80,.15);color:var(--green)}
.pill-red{background:rgba(255,87,34,.15);color:var(--red)}
.pill-yellow{background:rgba(255,235,59,.1);color:var(--yellow)}
.pill-blue{background:rgba(0,188,212,.1);color:var(--accent)}

/* Buttons */
button{position:relative;overflow:hidden;border:none;padding:7px 15px;border-radius:8px;cursor:pointer;font-size:12px;font-weight:600;letter-spacing:.3px;transition:transform .1s,box-shadow .1s}
button:active{transform:scale(.96)}
.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;box-shadow:0 2px 10px rgba(0,188,212,.3)}
.btn-primary:hover{box-shadow:0 4px 18px rgba(0,188,212,.45)}
.btn-secondary{background:var(--card2);color:var(--text);border:1px solid var(--border)}
.btn-secondary:hover{border-color:var(--accent);color:var(--accent)}
.btn-danger{background:rgba(255,87,34,.15);color:var(--red);border:1px solid rgba(255,87,34,.3)}
.btn-danger:hover{background:rgba(255,87,34,.25)}
/* Ripple */
.ripple{position:absolute;border-radius:50%;background:var(--ripple);transform:scale(0);animation:ripple-anim .5s linear;pointer-events:none}
@keyframes ripple-anim{to{transform:scale(4);opacity:0}}

/* Inputs */
input,select{background:var(--card2);border:1px solid var(--border);color:var(--text);padding:7px 11px;border-radius:8px;font-size:12px;outline:none}
input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,188,212,.15)}

/* Controls */
.controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:14px}
.vis-area{display:flex;align-items:flex-start;justify-content:flex-start;flex-direction:column;gap:10px;padding:4px 0}
.msg{font-size:13px;min-height:26px;padding:6px 12px;border-radius:8px;transition:all .3s}
.msg.ok{background:rgba(76,175,80,.12);color:var(--green);border:1px solid rgba(76,175,80,.25)}
.msg.err{background:rgba(255,87,34,.12);color:var(--red);border:1px solid rgba(255,87,34,.25)}
.msg.info{background:rgba(0,188,212,.1);color:var(--accent);border:1px solid rgba(0,188,212,.2)}
.msg.empty{background:transparent;border:none;color:var(--muted)}

/* Array bars */
.bars-wrap{display:flex;gap:5px;align-items:flex-end;height:130px}
.bar{min-width:30px;border-radius:6px 6px 0 0;display:flex;align-items:flex-end;justify-content:center;padding-bottom:4px;font-size:11px;font-weight:700;color:#fff;transition:height .3s,background .3s;cursor:default;position:relative}
.bar::after{content:attr(data-val);position:absolute;top:-18px;font-size:10px;color:var(--muted)}

/* Nodes */
.node-row{display:flex;align-items:center;flex-wrap:wrap;gap:4px}
.node{background:var(--node-bg);border:2px solid var(--accent);border-radius:10px;padding:7px 14px;font-size:13px;font-weight:600;text-align:center;min-width:42px;transition:all .3s;cursor:default}
.node.new{background:var(--accent);color:#000;transform:scale(1.1)}
.node.found{background:var(--green);border-color:var(--green);color:#fff;transform:scale(1.08)}
.node.deleted{background:var(--red);border-color:var(--red);color:#fff;opacity:.7}
.arrow{color:var(--accent);font-size:18px;opacity:.7}

/* Stack */
.stack-box{border:2px solid var(--border);border-radius:10px;padding:8px;min-width:90px;min-height:130px;display:flex;flex-direction:column-reverse;gap:4px;background:var(--card2)}
.stack-item{background:var(--card);border:1px solid var(--accent);padding:7px 14px;text-align:center;border-radius:8px;font-size:13px;font-weight:600;transition:all .3s}
.stack-item.new{background:var(--accent);color:#000;transform:scale(1.05)}
.stack-top-label{font-size:10px;color:var(--muted);text-align:center;margin-bottom:2px}

/* Hash */
.hash-table{display:flex;flex-direction:column;gap:4px;min-width:200px}
.hash-row{display:flex;align-items:center;gap:6px;font-size:12px}
.hash-idx{background:var(--card2);border:1px solid var(--border);padding:5px 10px;border-radius:6px;min-width:30px;text-align:center;color:var(--accent);font-weight:700;font-size:12px}
.hash-idx.lit{background:var(--red);color:#fff;border-color:var(--red)}
.hash-cell{background:var(--card2);border:1px solid var(--border);padding:5px 12px;border-radius:6px;color:var(--muted);min-width:80px;font-size:12px}
.hash-cell.filled{background:linear-gradient(90deg,rgba(0,188,212,.2),rgba(124,58,237,.2));border-color:var(--accent);color:var(--text);font-weight:600}

/* Queue */
.q-wrap{display:flex;align-items:center;gap:5px;flex-wrap:wrap}
.q-item{background:var(--node-bg);border:2px solid var(--accent);border-radius:10px;padding:8px 16px;font-size:13px;font-weight:600;transition:all .3s}
.q-item.new{background:var(--accent);color:#000;transform:scale(1.08)}
.q-item.leaving{background:var(--red);border-color:var(--red);color:#fff}
.tag{font-size:10px;font-weight:700;padding:2px 7px;border-radius:6px;text-transform:uppercase;letter-spacing:.5px}
.tag-front{background:rgba(76,175,80,.2);color:var(--green)}
.tag-rear{background:rgba(255,87,34,.2);color:var(--red)}

/* Help modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(4px);animation:fadeIn .2s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.4)}
.modal h2{color:var(--accent);font-size:16px;margin-bottom:4px}
.modal .sub{font-size:12px;color:var(--muted);margin-bottom:16px}
.modal-close{float:right;background:var(--card2);border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:16px;color:var(--text);display:flex;align-items:center;justify-content:center;margin-top:-4px}
.step{display:flex;gap:10px;margin-bottom:12px;align-items:flex-start}
.step-num{background:var(--accent);color:#000;width:22px;height:22px;border-radius:50%;font-size:11px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:1px}
.step p{font-size:13px;color:var(--text);line-height:1.6}
.step b{color:var(--accent)}
.step code{background:var(--card2);padding:1px 5px;border-radius:4px;font-size:11px;color:var(--accent2)}
.divider{height:1px;background:var(--border);margin:14px 0}
.btn-list{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.btn-demo{font-size:11px;padding:4px 10px;border-radius:6px;background:var(--card2);border:1px solid var(--border);color:var(--text);cursor:default}
.btn-demo.primary{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;border:none}

/* Speed slider */
.speed-wrap{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--muted)}
input[type=range]{width:80px;accent-color:var(--accent);padding:0}

/* Scrollbar */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--accent)}

/* Pulse animation */
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,188,212,.4)}50%{box-shadow:0 0 0 6px rgba(0,188,212,0)}}
.pulse{animation:pulse 1.5s infinite}

/* Glow */
.glow{text-shadow:0 0 8px var(--accent)}

/* Tooltip */
[data-tip]{position:relative}
[data-tip]:hover::after{content:attr(data-tip);position:absolute;bottom:110%;left:50%;transform:translateX(-50%);background:#111;color:#fff;font-size:11px;padding:4px 8px;border-radius:6px;white-space:nowrap;pointer-events:none;z-index:99;opacity:.9}
</style>
</head>
<body>

<!-- SIDEBAR -->
<div id="sidebar">
  <div class="sidebar-header">
    <h2>DS&A Dashboard</h2>
    <p>Interactive Visualizer</p>
  </div>
  <div class="nav-section">
    <div class="nav-label">Algorithms</div>
    <div class="nav-item active" onclick="show('search',this)"><span class="icon">ğŸ”</span><span class="label">Searching</span><span class="badge">2 algos</span></div>
    <div class="nav-item" onclick="show('sort',this)"><span class="icon">ğŸ“Š</span><span class="label">Sorting</span><span class="badge">5 algos</span></div>
    <div class="nav-label" style="margin-top:8px">Data Structures</div>
    <div class="nav-item" onclick="show('stack',this)"><span class="icon">ğŸ“š</span><span class="label">Stack</span><span class="badge">LIFO</span></div>
    <div class="nav-item" onclick="show('linked',this)"><span class="icon">ğŸ”—</span><span class="label">Linked List</span><span class="badge">3 types</span></div>
    <div class="nav-item" onclick="show('hash',this)"><span class="icon">ğŸ—‚ï¸</span><span class="label">Hash Function</span><span class="badge">2 types</span></div>
    <div class="nav-item" onclick="show('queue',this)"><span class="icon">ğŸš¶</span><span class="label">Queue</span><span class="badge">FIFO</span></div>
  </div>
  <div class="sidebar-footer">
    <span>Theme</span>
    <div class="theme-toggle" onclick="toggleTheme()" id="theme-btn">ğŸŒ™ Dark</div>
  </div>
</div>

<!-- MAIN -->
<div id="main">
  <div id="topbar">
    <div class="topbar-left">
      <div id="topic-icon" style="font-size:24px">ğŸ”</div>
      <div>
        <div id="topic-title" style="font-size:17px;font-weight:700">Searching Algorithms</div>
        <div id="topic-sub" style="font-size:12px;color:var(--muted)">Linear Search Â· Binary Search</div>
      </div>
    </div>
    <div class="topbar-right">
      <button class="help-btn" onclick="showHelp()" id="help-trigger">â“ How to use</button>
    </div>
  </div>
  <div id="content"></div>
</div>

<!-- HELP MODAL -->
<div id="modal" style="display:none"></div>

<script>
// â”€â”€ Ripple effect â”€â”€
document.addEventListener('click',e=>{
  const btn=e.target.closest('button');
  if(!btn)return;
  const r=document.createElement('span');
  const d=Math.max(btn.offsetWidth,btn.offsetHeight);
  const rect=btn.getBoundingClientRect();
  r.className='ripple';r.style.cssText=`width:${d}px;height:${d}px;left:${e.clientX-rect.left-d/2}px;top:${e.clientY-rect.top-d/2}px`;
  btn.appendChild(r);setTimeout(()=>r.remove(),600);
});

// â”€â”€ Theme â”€â”€
function toggleTheme(){
  const html=document.documentElement;
  const dark=html.getAttribute('data-theme')==='dark';
  html.setAttribute('data-theme',dark?'light':'dark');
  document.getElementById('theme-btn').textContent=dark?'â˜€ï¸ Light':'ğŸŒ™ Dark';
}

// â”€â”€ Help modal â”€â”€
const helpContent={
  search:{
    title:'ğŸ” Searching Algorithms',sub:'How to use the visualizer',
    steps:[
      {n:1,t:'Choose algorithm',d:'Click <b>Linear Search</b> or <b>Binary Search</b> to switch modes.'},
      {n:2,t:'Enter a target',d:'Type a number (1â€“9) in the <b>Target</b> input field.'},
      {n:3,t:'Run it',d:'Press <b>â–¶ Search</b> to start. Each step is highlighted â€” <span style="color:#ff5722">orange</span> = currently checking.'},
      {n:4,t:'Result',d:'<span style="color:#4caf50">Green</span> = found. Red message = not found.'},
      {n:5,t:'Reset',d:'Press <b>â†º Reset</b> to clear highlights and start over.'},
    ],
    note:'Binary Search requires a sorted array â€” it automatically uses a sorted version.'
  },
  sort:{
    title:'ğŸ“Š Sorting Algorithms',sub:'How to use the visualizer',
    steps:[
      {n:1,t:'Select algorithm',d:'Choose from the dropdown: <b>Bubble, Selection, Insertion,</b> or <b>Merge Sort</b>.'},
      {n:2,t:'Adjust speed',d:'Use the speed selector â€” Slow lets you follow each swap clearly.'},
      {n:3,t:'Watch it sort',d:'<span style="color:#ff5722">Orange</span> bars are being compared. <span style="color:#4caf50">Green</span> bars are in their final position.'},
      {n:4,t:'Reset',d:'Press <b>â†º Reset</b> to restore the original unsorted array.'},
    ],
    note:'Merge Sort is the most efficient here at O(n log n) â€” notice how it splits and merges!'
  },
  stack:{
    title:'ğŸ“š Stack',sub:'How to use the visualizer',
    steps:[
      {n:1,t:'Push',d:'Type a value and press <b>Push</b> â€” the item appears on top of the stack.'},
      {n:2,t:'Pop',d:'Press <b>Pop</b> to remove the top item (LIFO order).'},
      {n:3,t:'Peek',d:'Press <b>Peek</b> to see the top element without removing it.'},
      {n:4,t:'RPN Evaluator',d:'Type an expression like <code>3 4 + 2 *</code> and press <b>Eval RPN</b> to evaluate it step by step using a stack.'},
    ],
    note:'RPN (Reverse Polish Notation) eliminates the need for parentheses â€” it\'s how calculators work internally!'
  },
  linked:{
    title:'ğŸ”— Linked List',sub:'How to use the visualizer',
    steps:[
      {n:1,t:'Choose type',d:'Select <b>Singly, Doubly,</b> or <b>Circular</b> from the dropdown.'},
      {n:2,t:'Insert',d:'Type a value and click <b>Insert Head</b> (adds to front) or <b>Insert Tail</b> (adds to end).'},
      {n:3,t:'Delete',d:'Type an existing value and press <b>Delete</b> â€” the node is removed from the chain.'},
      {n:4,t:'Search',d:'Type a value and press <b>Search</b> â€” the found node glows <span style="color:#4caf50">green</span>.'},
    ],
    note:'Singly â†’ each node points forward. Doubly â†’ â‡” arrows (bidirectional). Circular â†’ last node loops back to HEAD.'
  },
  hash:{
    title:'ğŸ—‚ï¸ Hash Function',sub:'How to use the visualizer',
    steps:[
      {n:1,t:'Choose method',d:'Click <b>Open Hashing</b> (chaining) or <b>Closed Hashing</b> (linear probing).'},
      {n:2,t:'Insert a key',d:'Type any text or number and press <b>Insert</b>. Watch it map to an index!'},
      {n:3,t:'See collisions',d:'Insert multiple keys â€” collisions are handled automatically (chaining or probing).'},
      {n:4,t:'Search',d:'Type a key and press <b>Search</b> to find where it lives in the table.'},
    ],
    note:'Hash formula used: sum of char codes % 7. The <span style="color:#ff5722">red index</span> shows where the key was placed.'
  },
  queue:{
    title:'ğŸš¶ Queue',sub:'How to use the visualizer',
    steps:[
      {n:1,t:'Choose type',d:'Switch between <b>Linear Queue</b> and <b>Circular Queue</b>.'},
      {n:2,t:'Enqueue',d:'Type a value and press <b>Enqueue</b> to add it to the REAR.'},
      {n:3,t:'Dequeue',d:'Press <b>Dequeue</b> to remove from the FRONT (FIFO order).'},
      {n:4,t:'Peek',d:'Press <b>Peek</b> to view the front element without removing it.'},
    ],
    note:'Circular Queue wraps around â€” when the rear hits the end, it goes back to index 0 if there\'s space at the front!'
  }
};
let currentTopic='search';
function showHelp(){
  const h=helpContent[currentTopic];
  document.getElementById('modal').style.display='flex';
  document.getElementById('modal').innerHTML=`
  <div class="modal-overlay" onclick="if(event.target===this)closeHelp()">
    <div class="modal">
      <button class="modal-close" onclick="closeHelp()">âœ•</button>
      <h2>${h.title}</h2>
      <div class="sub">${h.sub}</div>
      ${h.steps.map(s=>`
        <div class="step">
          <div class="step-num">${s.n}</div>
          <div class="step p"><b>${s.t}:</b> ${s.d}</div>
        </div>`).join('')}
      <div class="divider"></div>
      <div style="font-size:12px;color:var(--muted);line-height:1.7">ğŸ’¡ <b style="color:var(--accent)">Tip:</b> ${h.note}</div>
      <div class="divider"></div>
      <div style="font-size:11px;color:var(--muted);margin-bottom:6px">Button legend:</div>
      <div class="btn-list">
        <span class="btn-demo primary">â–¶ Action button</span>
        <span class="btn-demo">â†º Reset</span>
        <span class="btn-demo" style="border-color:rgba(255,87,34,.4);color:#ff7043">Delete/Danger</span>
      </div>
    </div>
  </div>`;
}
function closeHelp(){document.getElementById('modal').style.display='none';}

// â”€â”€ Topic data â”€â”€
const topics={
  search:{icon:'ğŸ”',title:'Searching Algorithms',sub:'Linear Search Â· Binary Search',
    theory:`<b>Linear Search</b> scans every element from left to right until a match is found. Simple but slow for large data â€” O(n).<br><br>
<b>Binary Search</b> works on <i>sorted</i> arrays. It halves the search space each step by comparing the target to the middle element â€” O(log n).<br><br>
<b>Key Concept:</b> Binary Search is a classic <i>divide and conquer</i> algorithm. For n=1,000,000 it takes only ~20 steps!`,
    complexity:[
      ['Linear Search','O(1)','O(n)','O(n)','O(1)'],
      ['Binary Search','O(1)','O(log n)','O(log n)','O(1)'],
    ],cols:['Algorithm','Best','Avg','Worst','Space'],vis:searchVis},
  sort:{icon:'ğŸ“Š',title:'Sorting Algorithms',sub:'Bubble Â· Selection Â· Insertion Â· Merge',
    theory:`<b>Bubble Sort:</b> Swaps adjacent out-of-order pairs repeatedly â€” easy but O(nÂ²).<br><br>
<b>Selection Sort:</b> Finds the minimum each pass, places it at front â€” also O(nÂ²) but fewer swaps.<br><br>
<b>Insertion Sort:</b> Efficient for nearly-sorted data. Builds sorted half incrementally.<br><br>
<b>Merge Sort:</b> Divide & conquer. Splits in half, sorts each, merges â€” stable O(n log n).<br><br>
<b>Counting Sort:</b> Non-comparison. Counts occurrences â€” O(n+k) for small integer ranges.`,
    complexity:[
      ['Bubble','O(n)','O(nÂ²)','O(nÂ²)','O(1)'],
      ['Selection','O(nÂ²)','O(nÂ²)','O(nÂ²)','O(1)'],
      ['Insertion','O(n)','O(nÂ²)','O(nÂ²)','O(1)'],
      ['Merge','O(n log n)','O(n log n)','O(n log n)','O(n)'],
      ['Counting','O(n+k)','O(n+k)','O(n+k)','O(k)'],
    ],cols:['Algorithm','Best','Avg','Worst','Space'],vis:sortVis},
  stack:{icon:'ğŸ“š',title:'Stack',sub:'LIFO Â· Push Â· Pop Â· RPN Evaluator',
    theory:`A <b>Stack</b> is LIFO â€” Last In, First Out. Like a stack of plates.<br><br>
<b>Push</b> adds to top. <b>Pop</b> removes from top. <b>Peek</b> views top without removing.<br><br>
<b>Polish Notation (Prefix):</b> Operator before operands â€” e.g. <code>+ 3 4</code><br>
<b>Reverse Polish Notation:</b> Operator after operands â€” e.g. <code>3 4 +</code>. Evaluated using a stack: push numbers, when you hit an operator, pop two and push result.<br><br>
<b>Recursion</b> uses an implicit call stack â€” each call is pushed; when it returns, it's popped.`,
    complexity:[
      ['Push','O(1)','O(1)','O(1)','O(1)'],
      ['Pop','O(1)','O(1)','O(1)','O(1)'],
      ['Peek','O(1)','O(1)','O(1)','O(1)'],
      ['Search','O(n)','O(n)','O(n)','O(1)'],
    ],cols:['Operation','Best','Avg','Worst','Space'],vis:stackVis},
  linked:{icon:'ğŸ”—',title:'Linked List',sub:'Singly Â· Doubly Â· Circular',
    theory:`A <b>Linked List</b> is a chain of nodes â€” each holds data and a pointer to the next.<br><br>
<b>Singly:</b> One-way chain. Each node â†’ next.<br>
<b>Doubly:</b> Two-way chain. Each node â‡” prev & next. Allows backward traversal.<br>
<b>Circular:</b> Last node points back to HEAD â€” no NULL end.<br><br>
<b>vs Arrays:</b> Dynamic size, O(1) insert/delete at head, but O(n) random access (no index).`,
    complexity:[
      ['Insert Head','O(1)','O(1)','O(1)','O(1)'],
      ['Insert Tail','O(n)','O(n)','O(n)','O(1)'],
      ['Delete','O(1)*','O(n)','O(n)','O(1)'],
      ['Search','O(1)','O(n)','O(n)','O(1)'],
    ],cols:['Operation','Best','Avg','Worst','Space'],vis:linkedVis},
  hash:{icon:'ğŸ—‚ï¸',title:'Hash Functions',sub:'Open Hashing Â· Closed Hashing',
    theory:`A <b>Hash Function</b> maps a key â†’ index in a table for near-instant O(1) access.<br><br>
<b>Open Hashing (Chaining):</b> Each slot holds a linked list. Multiple keys at same slot â€” no limit per slot.<br><br>
<b>Closed Hashing (Open Addressing):</b> If a slot is taken, probe the next one. Linear probing: check i, i+1, i+2â€¦<br><br>
<b>Load Factor</b> = n/m (items Ã· slots). Keep â‰¤ 0.7 for good performance and low collisions.`,
    complexity:[
      ['Insert','O(1)','O(1)','O(n)','O(n)'],
      ['Delete','O(1)','O(1)','O(n)','O(n)'],
      ['Search','O(1)','O(1)','O(n)','O(n)'],
    ],cols:['Operation','Best','Avg','Worst','Space'],vis:hashVis},
  queue:{icon:'ğŸš¶',title:'Queue',sub:'FIFO Â· Linear Â· Circular',
    theory:`A <b>Queue</b> is FIFO â€” First In, First Out. Like a line at a store.<br><br>
<b>Enqueue</b> adds to the REAR. <b>Dequeue</b> removes from the FRONT. <b>Peek</b> views the front.<br><br>
<b>Circular Queue:</b> The rear pointer wraps to index 0 when it hits the end â€” efficiently reuses freed front space.<br><br>
<b>Real-world uses:</b> CPU scheduling, BFS graph traversal, print spooling, message queues.`,
    complexity:[
      ['Enqueue','O(1)','O(1)','O(1)','O(1)'],
      ['Dequeue','O(1)','O(1)','O(1)','O(1)'],
      ['Peek','O(1)','O(1)','O(1)','O(1)'],
      ['Search','O(n)','O(n)','O(n)','O(1)'],
    ],cols:['Operation','Best','Avg','Worst','Space'],vis:queueVis},
};

function pillColor(v){
  if(['O(1)'].includes(v))return 'pill-green';
  if(v.includes('log'))return 'pill-blue';
  if(['O(n)','O(n+k)','O(k)'].includes(v))return 'pill-yellow';
  if(v.includes('nÂ²'))return 'pill-red';
  return 'pill-blue';
}

function show(key,el){
  currentTopic=key;
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  if(el)el.classList.add('active');
  const t=topics[key];
  document.getElementById('topic-icon').textContent=t.icon;
  document.getElementById('topic-title').textContent=t.title;
  document.getElementById('topic-sub').textContent=t.sub;
  const c=document.getElementById('content');
  c.innerHTML=`
    <div class="card theory">
      <h3>ğŸ“– Theory <span>Background</span></h3>
      <p>${t.theory}</p>
    </div>
    <div class="card complexity">
      <h3>â± Complexity <span>Big-O</span></h3>
      <table><thead><tr>${t.cols.map(h=>`<th>${h}</th>`).join('')}</tr></thead>
      <tbody>${t.complexity.map(r=>`<tr>${r.map((d,i)=>`<td>${i>0?`<span class="pill ${pillColor(d)}">${d}</span>`:d}</td>`).join('')}</tr>`).join('')}</tbody></table>
    </div>
    <div class="card visualizer">
      <h3>ğŸ® Visualizer <span>Interactive</span></h3>
      <div id="vis-area" class="vis-area"></div>
    </div>`;
  t.vis();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SEARCH VIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function searchVis(){
  const el=document.getElementById('vis-area');
  const arr=[3,7,1,9,4,6,2,8,5];
  const sorted=[...arr].sort((a,b)=>a-b);
  let mode='linear',running=false;
  el.innerHTML=`
    <div class="controls">
      <button class="btn-primary" onclick="setMode('linear')">Linear Search</button>
      <button class="btn-secondary" onclick="setMode('binary')">Binary Search</button>
      <input type="number" id="s-t" placeholder="Target 1-9" min="1" max="9" value="6" style="width:100px">
      <button class="btn-primary pulse" onclick="runS()" id="run-s">â–¶ Search</button>
      <button class="btn-danger" onclick="resetS()">â†º Reset</button>
    </div>
    <div id="s-step" style="font-size:12px;color:var(--muted);min-height:18px"></div>
    <div id="s-bars" class="bars-wrap"></div>
    <div id="s-msg" class="msg empty"></div>`;
  renderBars(arr);
  window.setMode=m=>{mode=m;resetS();document.querySelector('.btn-secondary').className=m==='binary'?'btn-primary':'btn-secondary';document.querySelectorAll('.btn-primary')[0].className=m==='linear'?'btn-primary':'btn-secondary';};
  window.resetS=()=>{renderBars(mode==='binary'?sorted:arr);setMsg('','empty');document.getElementById('s-step').textContent='';};
  window.runS=async()=>{
    if(running)return;running=true;
    const t=parseInt(document.getElementById('s-t').value);
    if(mode==='linear')await linSearch(arr,t);else await binSearch(sorted,t);
    running=false;
  };
  function renderBars(a,hi=-1,found=[],faded=[]){
    document.getElementById('s-bars').innerHTML=a.map((v,i)=>{
      let bg=faded.includes(i)?'var(--border)':found.includes(i)?'var(--green)':i===hi?'var(--red)':'var(--bar)';
      return `<div class="bar" data-val="${v}" style="height:${v*12+16}px;background:${bg}">${v}</div>`;
    }).join('');
  }
  async function linSearch(a,t){
    for(let i=0;i<a.length;i++){
      renderBars(a,i,[],[]);
      document.getElementById('s-step').textContent=`Step ${i+1}: Checking index ${i} â†’ value ${a[i]}`;
      await sleep(480);
      if(a[i]===t){renderBars(a,-1,[i]);setMsg(`âœ… Found <b>${t}</b> at index ${i}`,'ok');return;}
    }
    renderBars(a);setMsg(`âŒ ${t} not found in array`,'err');
  }
  async function binSearch(a,t){
    let lo=0,hi=a.length-1;
    while(lo<=hi){
      let mid=Math.floor((lo+hi)/2);
      const faded=[...Array(a.length).keys()].filter(i=>i<lo||i>hi);
      renderBars(a,mid,[],faded);
      document.getElementById('s-step').textContent=`lo=${lo}  mid=${mid}  hi=${hi}  â†’  a[${mid}]=${a[mid]}`;
      await sleep(700);
      if(a[mid]===t){renderBars(a,-1,[mid]);setMsg(`âœ… Found <b>${t}</b> at index ${mid}`,'ok');return;}
      else if(a[mid]<t)lo=mid+1;else hi=mid-1;
    }
    setMsg(`âŒ ${t} not found`,'err');
  }
  function setMsg(m,c){const e=document.getElementById('s-msg');e.innerHTML=m;e.className='msg '+(c||'empty');}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SORT VIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function sortVis(){
  const el=document.getElementById('vis-area');
  const orig=[6,3,8,1,5,9,2,7,4];
  let arr=[...orig],running=false;
  el.innerHTML=`
    <div class="controls">
      <select id="s-alg">
        <option value="bubble">Bubble Sort</option>
        <option value="selection">Selection Sort</option>
        <option value="insertion">Insertion Sort</option>
        <option value="merge">Merge Sort</option>
      </select>
      <button class="btn-primary pulse" onclick="runSort()">â–¶ Sort</button>
      <button class="btn-danger" onclick="resetSort()">â†º Reset</button>
      <div class="speed-wrap">âš¡ Speed:
        <input type="range" id="spd" min="50" max="600" value="300" step="50">
        <span id="spd-label">Medium</span>
      </div>
    </div>
    <div id="sort-bars" class="bars-wrap"></div>
    <div id="sort-msg" class="msg empty"></div>`;
  document.getElementById('spd').oninput=function(){
    const labels={50:'Fast',100:'Fast',150:'Fast',200:'Medium',250:'Medium',300:'Medium',350:'Slow',400:'Slow',450:'Slow',500:'Slow',550:'Slow',600:'Slow'};
    document.getElementById('spd-label').textContent=labels[this.value]||'';
  };
  renderSortBars(arr,[],[]);
  window.resetSort=()=>{arr=[...orig];renderSortBars(arr,[],[]);document.getElementById('sort-msg').innerHTML='';document.getElementById('sort-msg').className='msg empty';};
  window.runSort=async()=>{
    if(running)return;running=true;arr=[...orig];
    const alg=document.getElementById('s-alg').value;
    const sp=()=>600-parseInt(document.getElementById('spd').value);
    if(alg==='bubble')await bubbleSort(arr,sp);
    else if(alg==='selection')await selSort(arr,sp);
    else if(alg==='insertion')await insSort(arr,sp);
    else await mergeSort(arr,sp);
    running=false;
  };
  function renderSortBars(a,active=[],done=[]){
    document.getElementById('sort-bars').innerHTML=a.map((v,i)=>{
      const bg=done.includes(i)?'var(--green)':active.includes(i)?'var(--red)':'var(--bar)';
      return `<div class="bar" data-val="${v}" style="height:${v*12+10}px;background:${bg}">${v}</div>`;
    }).join('');
  }
  const setMsg=(m,c)=>{const e=document.getElementById('sort-msg');e.innerHTML=m;e.className='msg '+(c||'empty');};
  async function bubbleSort(a,sp){
    const done=[];
    for(let i=0;i<a.length-1;i++){
      for(let j=0;j<a.length-i-1;j++){
        renderSortBars(a,[j,j+1],done);await sleep(sp());
        if(a[j]>a[j+1])[a[j],a[j+1]]=[a[j+1],a[j]];
      }
      done.push(a.length-1-i);
    }
    renderSortBars(a,[],[...a.keys()]);setMsg('âœ… Sorted with Bubble Sort!','ok');
  }
  async function selSort(a,sp){
    const done=[];
    for(let i=0;i<a.length-1;i++){
      let min=i;
      for(let j=i+1;j<a.length;j++){renderSortBars(a,[min,j],done);await sleep(sp());if(a[j]<a[min])min=j;}
      [a[i],a[min]]=[a[min],a[i]];done.push(i);
    }
    renderSortBars(a,[],[...a.keys()]);setMsg('âœ… Sorted with Selection Sort!','ok');
  }
  async function insSort(a,sp){
    for(let i=1;i<a.length;i++){let k=a[i],j=i-1;while(j>=0&&a[j]>k){a[j+1]=a[j];j--;renderSortBars(a,[j+1,i],[]);await sleep(sp());}a[j+1]=k;}
    renderSortBars(a,[],[...a.keys()]);setMsg('âœ… Sorted with Insertion Sort!','ok');
  }
  async function mergeSort(a,sp){
    await mSort(a,0,a.length-1,sp);
    renderSortBars(a,[],[...a.keys()]);setMsg('âœ… Sorted with Merge Sort!','ok');
  }
  async function mSort(a,l,r,sp){
    if(l>=r)return;
    const m=Math.floor((l+r)/2);
    await mSort(a,l,m,sp);await mSort(a,m+1,r,sp);await merge(a,l,m,r,sp);
  }
  async function merge(a,l,m,r,sp){
    const L=a.slice(l,m+1),R=a.slice(m+1,r+1);let i=0,j=0,k=l;
    while(i<L.length&&j<R.length){a[k++]=L[i]<=R[j]?L[i++]:R[j++];renderSortBars(a,[k-1],[]);await sleep(sp());}
    while(i<L.length){a[k++]=L[i++];renderSortBars(a,[k-1],[]);await sleep(sp());}
    while(j<R.length){a[k++]=R[j++];renderSortBars(a,[k-1],[]);await sleep(sp());}
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STACK VIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function stackVis(){
  const el=document.getElementById('vis-area');
  let stack=[];
  el.innerHTML=`
    <div class="controls">
      <input type="text" id="sv" placeholder="Value">
      <button class="btn-primary" onclick="sPush()">â¬† Push</button>
      <button class="btn-secondary" onclick="sPop()">â¬‡ Pop</button>
      <button class="btn-secondary" onclick="sPeek()">ğŸ‘ Peek</button>
    </div>
    <div style="display:flex;gap:24px;align-items:flex-start;flex-wrap:wrap">
      <div>
        <div class="stack-top-label">â† TOP</div>
        <div id="s-box" class="stack-box"></div>
        <div style="font-size:10px;color:var(--muted);text-align:center;margin-top:4px">BOTTOM</div>
      </div>
      <div style="flex:1;min-width:200px">
        <div style="font-size:12px;color:var(--muted);margin-bottom:8px;font-weight:600">RPN Evaluator</div>
        <div class="controls" style="flex-direction:column;align-items:flex-start;gap:6px">
          <input type="text" id="rpn" placeholder="e.g.  3 4 + 2 *" style="width:200px">
          <button class="btn-primary" onclick="evalRPN()">âš™ Evaluate RPN</button>
        </div>
        <div id="rpn-out" style="font-size:12px;color:var(--muted);margin-top:8px;line-height:1.8;max-height:120px;overflow-y:auto"></div>
      </div>
    </div>
    <div id="st-msg" class="msg empty" style="margin-top:4px"></div>`;
  window.sPush=()=>{
    const v=document.getElementById('sv').value.trim();
    if(!v){sm('Enter a value','err');return;}
    stack.push(v);renderStack(stack.length-1);sm(`Pushed <b>${v}</b> â†’ stack size: ${stack.length}`,'ok');
  };
  window.sPop=()=>{
    if(!stack.length){sm('Stack underflow â€” empty!','err');return;}
    const v=stack.pop();renderStack(-1);sm(`Popped <b>${v}</b> â†’ stack size: ${stack.length}`,'info');
  };
  window.sPeek=()=>{
    if(!stack.length){sm('Stack is empty!','err');return;}
    sm(`Peek â†’ top is <b>${stack[stack.length-1]}</b>`,'info');
  };
  window.evalRPN=()=>{
    const expr=document.getElementById('rpn').value.trim();
    if(!expr){sm('Enter an RPN expression','err');return;}
    const tokens=expr.split(/\s+/);const s=[];let out='<b>RPN Steps:</b><br>';
    for(const t of tokens){
      if(!isNaN(t)){s.push(parseFloat(t));out+=`&nbsp;&nbsp;Push ${t} â†’ [${s.join(', ')}]<br>`;}
      else{
        if(s.length<2){sm('Invalid RPN expression','err');return;}
        const b=s.pop(),a=s.pop();
        let res=t==='+'?a+b:t==='-'?a-b:t==='*'?a*b:a/b;
        s.push(res);out+=`&nbsp;&nbsp;${a} ${t} ${b} = <b>${res}</b> â†’ [${s.join(', ')}]<br>`;
      }
    }
    document.getElementById('rpn-out').innerHTML=out+`<b style="color:var(--green)">Result = ${s[0]}</b>`;
    sm(`RPN result: <b>${s[0]}</b>`,'ok');
  };
  function renderStack(newIdx=-1){
    document.getElementById('s-box').innerHTML=stack.length
      ?stack.map((v,i)=>`<div class="stack-item${i===newIdx?' new':''}">${v}</div>`).join('')
      :`<div style="font-size:12px;color:var(--muted);text-align:center;padding:10px">Empty</div>`;
  }
  function sm(m,c){const e=document.getElementById('st-msg');e.innerHTML=m;e.className='msg '+(c||'empty');}
  renderStack();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LINKED LIST VIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function linkedVis(){
  const el=document.getElementById('vis-area');
  let list=[],llmode='singly';
  el.innerHTML=`
    <div class="controls">
      <select id="ll-m" onchange="setLL(this.value)">
        <option value="singly">Singly Linked</option>
        <option value="doubly">Doubly Linked</option>
        <option value="circular">Circular</option>
      </select>
      <input type="text" id="ll-v" placeholder="Value">
      <button class="btn-primary" onclick="llIH()">â¬… Insert Head</button>
      <button class="btn-secondary" onclick="llIT()">Insert Tail â¡</button>
      <button class="btn-danger" onclick="llD()">ğŸ—‘ Delete</button>
      <button class="btn-secondary" onclick="llS()">ğŸ” Search</button>
    </div>
    <div id="ll-d" style="overflow-x:auto;padding:8px 0;min-height:60px"></div>
    <div id="ll-msg" class="msg empty"></div>`;
  window.setLL=m=>{llmode=m;renderLL();};
  window.llIH=()=>{const v=llv();if(!v)return;list.unshift(v);renderLL([0]);llmsg(`Inserted <b>${v}</b> at HEAD`,'ok');};
  window.llIT=()=>{const v=llv();if(!v)return;list.push(v);renderLL([list.length-1]);llmsg(`Inserted <b>${v}</b> at TAIL`,'ok');};
  window.llD=()=>{const v=llv();if(!v)return;const i=list.indexOf(v);if(i<0){llmsg(`"${v}" not found`,'err');return;}list.splice(i,1);renderLL();llmsg(`Deleted <b>${v}</b>`,'info');};
  window.llS=()=>{const v=llv();if(!v)return;const i=list.indexOf(v);if(i<0){llmsg(`"${v}" not found`,'err');return;}renderLL([],i);llmsg(`Found <b>${v}</b> at position ${i}`,'ok');};
  function llv(){const v=document.getElementById('ll-v').value.trim();if(!v)llmsg('Enter a value','err');return v;}
  function renderLL(newIdx=[],foundIdx=-1){
    const d=document.getElementById('ll-d');
    if(!list.length){d.innerHTML=`<div style="color:var(--muted);font-size:13px">HEAD â†’ NULL (empty list)</div>`;return;}
    let html=`<div class="node-row">`;
    html+=`<span style="font-size:11px;color:var(--green);font-weight:700;margin-right:4px">HEAD</span>`;
    list.forEach((v,i)=>{
      const cls='node'+(newIdx.includes(i)?' new':i===foundIdx?' found':'');
      if(i>0)html+=`<span class="arrow">${llmode==='doubly'?'â‡”':'â†’'}</span>`;
      html+=`<div class="${cls}" data-tip="index ${i}">${v}</div>`;
    });
    if(llmode==='circular')html+=`<span class="arrow">â†©</span><span style="font-size:11px;color:var(--accent)">HEAD</span>`;
    else html+=`<span class="arrow">â†’</span><span style="color:var(--muted);font-size:12px">NULL</span>`;
    html+=`</div>`;
    d.innerHTML=html;
  }
  function llmsg(m,c){const e=document.getElementById('ll-msg');e.innerHTML=m;e.className='msg '+(c||'empty');}
  renderLL();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HASH VIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function hashVis(){
  const el=document.getElementById('vis-area');
  const SZ=7;
  let tOpen=Array(SZ).fill(0).map(()=>[]);
  let tClosed=Array(SZ).fill(null);
  let hmode='open';
  el.innerHTML=`
    <div class="controls">
      <button class="btn-primary" id="btn-open" onclick="setH('open')">ğŸ”— Open (Chaining)</button>
      <button class="btn-secondary" id="btn-closed" onclick="setH('closed')">ğŸ”’ Closed (Probing)</button>
      <input type="text" id="hk" placeholder="Key" style="width:90px">
      <button class="btn-primary" onclick="hIns()">â• Insert</button>
      <button class="btn-secondary" onclick="hSrc()">ğŸ” Search</button>
      <button class="btn-danger" onclick="hReset()">â†º Reset</button>
    </div>
    <div style="display:flex;gap:20px;flex-wrap:wrap">
      <div><div style="font-size:11px;color:var(--muted);margin-bottom:6px">Hash Table (size ${SZ})</div>
      <div id="h-tbl" class="hash-table"></div></div>
      <div style="flex:1;min-width:180px">
        <div id="h-info" style="font-size:12px;color:var(--muted);line-height:1.8"></div>
        <div style="margin-top:8px;font-size:11px;color:var(--muted)">Formula: Î£ char codes % ${SZ}</div>
      </div>
    </div>
    <div id="h-msg" class="msg empty"></div>`;
  window.setH=m=>{hmode=m;document.getElementById('btn-open').className=m==='open'?'btn-primary':'btn-secondary';document.getElementById('btn-closed').className=m==='closed'?'btn-primary':'btn-secondary';hReset();};
  window.hReset=()=>{tOpen=Array(SZ).fill(0).map(()=>[]);tClosed=Array(SZ).fill(null);renderH();document.getElementById('h-msg').className='msg empty';document.getElementById('h-info').textContent='';};
  window.hIns=()=>{
    const k=document.getElementById('hk').value.trim();if(!k){hm('Enter a key','err');return;}
    const idx=hfn(k);
    if(hmode==='open'){tOpen[idx].push(k);renderH([idx]);hi(`hash("${k}") = ${idx} â†’ chained at index ${idx}`);hm(`Inserted <b>${k}</b>`,'ok');}
    else{let i=idx,c=0;while(tClosed[i]!==null&&c<SZ){i=(i+1)%SZ;c++;}if(c===SZ){hm('Table full!','err');return;}tClosed[i]=k;renderH([i]);hi(`hash("${k}") = ${idx}${i!==idx?` â†’ collision â†’ probed to ${i}`:` â†’ placed at ${i}`}`);hm(`Inserted <b>${k}</b>`,'ok');}
  };
  window.hSrc=()=>{
    const k=document.getElementById('hk').value.trim();if(!k)return;
    const idx=hfn(k);
    if(hmode==='open'){const f=tOpen[idx].includes(k);renderH(f?[idx]:[]);hm(f?`âœ… Found <b>${k}</b> at index ${idx}`:`âŒ <b>${k}</b> not found`,f?'ok':'err');}
    else{let i=idx,c=0,f=-1;while(c<SZ){if(tClosed[i]===k){f=i;break;}i=(i+1)%SZ;c++;}renderH(f>=0?[f]:[]);hm(f>=0?`âœ… Found <b>${k}</b> at index ${f}`:`âŒ <b>${k}</b> not found`,f>=0?'ok':'err');}
  };
  function hfn(k){return[...String(k)].reduce((s,c)=>s+c.charCodeAt(0),0)%SZ;}
  function hi(t){document.getElementById('h-info').innerHTML=t;}
  function hm(m,c){const e=document.getElementById('h-msg');e.innerHTML=m;e.className='msg '+(c||'empty');}
  function renderH(lit=[]){
    document.getElementById('h-tbl').innerHTML=Array(SZ).fill(0).map((_,i)=>{
      const isLit=lit.includes(i);
      if(hmode==='open'){
        const vals=tOpen[i];
        const cells=vals.length?vals.map(v=>`<span class="hash-cell filled">${v}</span>`).join('<span style="font-size:11px;color:var(--muted)"> â†’ </span>'):`<span class="hash-cell">â€”</span>`;
        return `<div class="hash-row"><span class="hash-idx${isLit?' lit':''}">${i}</span>${cells}</div>`;
      } else {
        const v=tClosed[i];
        return `<div class="hash-row"><span class="hash-idx${isLit?' lit':''}">${i}</span><span class="hash-cell${v?' filled':''}">${v||'â€”'}</span></div>`;
      }
    }).join('');
  }
  renderH();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUEUE VIS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function queueVis(){
  const el=document.getElementById('vis-area');
  const MAX=7;let queue=[],qmode='linear';
  el.innerHTML=`
    <div class="controls">
      <button class="btn-primary" id="btn-lin" onclick="setQ('linear')">Linear Queue</button>
      <button class="btn-secondary" id="btn-circ" onclick="setQ('circular')">Circular Queue</button>
      <input type="text" id="qv" placeholder="Value">
      <button class="btn-primary" onclick="qEnq()">â• Enqueue</button>
      <button class="btn-secondary" onclick="qDeq()">â– Dequeue</button>
      <button class="btn-secondary" onclick="qPeek()">ğŸ‘ Peek</button>
      <button class="btn-danger" onclick="qReset()">â†º Reset</button>
    </div>
    <div style="display:flex;align-items:center;gap:6px;margin-bottom:4px">
      <span class="tag tag-front">FRONT</span>
      <span style="font-size:12px;color:var(--muted)">Items enter from rear and leave from front</span>
      <span class="tag tag-rear">REAR</span>
    </div>
    <div id="q-d" class="q-wrap" style="min-height:52px"></div>
    <div id="q-slots" style="font-size:11px;color:var(--muted);margin-top:4px"></div>
    <div id="q-msg" class="msg empty"></div>`;
  window.setQ=m=>{qmode=m;document.getElementById('btn-lin').className=m==='linear'?'btn-primary':'btn-secondary';document.getElementById('btn-circ').className=m==='circular'?'btn-primary':'btn-secondary';qReset();};
  window.qReset=()=>{queue=[];renderQ();document.getElementById('q-msg').className='msg empty';};
  window.qEnq=()=>{const v=document.getElementById('qv').value.trim();if(!v){qm('Enter a value','err');return;}if(queue.length>=MAX){qm('Queue is full!','err');return;}queue.push(v);renderQ(queue.length-1);qm(`Enqueued <b>${v}</b> at REAR â€” size: ${queue.length}/${MAX}`,'ok');};
  window.qDeq=()=>{if(!queue.length){qm('Queue underflow â€” empty!','err');return;}const v=queue.shift();renderQ(-1);qm(`Dequeued <b>${v}</b> from FRONT â€” size: ${queue.length}/${MAX}`,'info');};
  window.qPeek=()=>{if(!queue.length){qm('Queue is empty!','err');return;}qm(`Peek â†’ FRONT is <b>${queue[0]}</b>`,'info');};
  function renderQ(ni=-1){
    const d=document.getElementById('q-d');
    if(!queue.length){d.innerHTML=`<span style="font-size:13px;color:var(--muted)">Empty queue</span>`;document.getElementById('q-slots').textContent='';return;}
    d.innerHTML=queue.map((v,i)=>`<div class="q-item${i===ni?' new':''}" data-tip="index ${i}">${v}</div>${i<queue.length-1?'<span class="arrow" style="font-size:14px">â†’</span>':''}`).join('');
    document.getElementById('q-slots').textContent=`${queue.length}/${MAX} slots used${qmode==='circular'?' (circular â€” rear wraps to 0 when full)':''}`;
  }
  function qm(m,c){const e=document.getElementById('q-msg');e.innerHTML=m;e.className='msg '+(c||'empty');}
  renderQ();
}

function sleep(ms){return new Promise(r=>setTimeout(r,ms));}

// Init
show('search', document.querySelector('.nav-item'));
</script>
</body>
</html>